#! /usr/bin/env python
"""
End members used in fractional cover.
Josh Sixsmith is the person to talk to about this code...

This file has been modified to only have the '2014_07_23' version
For older versions of the endmembers, see
https://github.com/GeoscienceAustralia/ga-neo-landsat-processor/blob/develop/gaip/endmembers.py

    Contacts:

        * Peter Scarth; peter.scarth@qld.gov.au
        * Josh Sixsmith; joshua.sixsmith@ga.gov.au
"""
import numpy


def sum_weight():
    """
    Retrieves the sum to one weighting constraint used for deriving the
    fractional components of a Landsat (5TM/7ETM+) image for '2014_07_23'.

    .. note::

        Scarth 20090810 14:06:35 CEST
        Define the weight of the sum to one constraint
        This value determined how well the resulting fractions will sum to 100%
        I typically determine this by running the unmixing against field data for
        a number of values, picking the best one

    :return:
        A floating point value representing the sum to one weighting
        constraint.
    """
    return 1.0


def endmember_version():
    return '2017_06_01'


def get_endmembers(sum_to_one_weight):
    """
    Gives green, dead1, dead2 and bare fractions
    Note the last row is the sum to one constraint value

    :param sum_to_one_weight:
    :return:
    """

    return numpy.array(
        [[1.676285627951248081e-01, 1.793760519412898047e-01, 1.800249578274374929e-01, 1.644810251213700003e-01],
         [1.013067517527280470e-01, 9.148077386679648315e-02, 9.787057988651595708e-02, 9.357316926664388523e-02],
         [2.855081668139599071e-01, 2.940815698339330209e-01, 2.957772554004903243e-01, 2.867214861607675358e-01],
         [2.842212385969656308e-01, 2.982398389195735633e-01, 2.962035914961198002e-01, 2.857694417107536911e-01],
         [-4.023254729743423741e-02, -5.233483839646423802e-02, -4.874294619336807383e-02, -5.691570902389657405e-02],
         [-1.777324907772438456e-01, -1.518353000358924065e-01, -1.529515289663135047e-01, -1.620328279305342511e-01],
         [-3.847254885085145126e-01, -4.377751614894352383e-01, -4.180100552317281837e-01, -3.986942140793792722e-01],
         [-1.190408594859160285e-01, -1.116259497240658094e-01, -1.085530192079545986e-01, -1.018965954238986171e-01],
         [-7.233485129289005111e-02, -3.926661773132659322e-02, -4.785537158737415003e-02, -3.896776035552314971e-02],
         [-6.304602865961794755e-02, -5.545397820344512285e-02, -5.376222468770796431e-02, -5.907612437538970612e-02],
         [6.867411467545116166e-02, 7.294093861729288031e-02, 7.265871850598158710e-02, 6.915086689070867876e-02],
         [1.002350160928677930e-01, 9.693639966414974163e-02, 9.491486201564580671e-02, 9.016807211143129663e-02],
         [2.653710260476407901e-01, 2.734459144218914783e-01, 2.763140253403082447e-01, 2.511950798742294544e-01],
         [-2.271245611665087538e-01, -2.322942781705743809e-01, -2.351184701515278141e-01, -2.433074275939409725e-01],
         [-2.080459883829519629e-01, -2.465183993995559153e-01, -2.332601767751262267e-01, -2.340097903847059568e-01],
         [-6.007343953686562071e-02, -8.443318071352891308e-02, -7.923850803031984302e-02, -7.243931917992528502e-02],
         [-3.184767710026276816e-02, -7.736622255639934165e-02, -7.888477232312963994e-02, -6.483375461438206644e-02],
         [1.164666734975750989e-01, 1.315510419035207379e-01, 1.323958918092310588e-01, 1.438696461629167533e-01],
         [1.485817807647432653e-01, 1.465634788767805341e-01, 1.515322382977267179e-01, 1.504567790760289459e-01],
         [-1.634464993964363233e-01, -2.199915255395565872e-01, -2.180959529375706418e-01, -2.128828053193603798e-01],
         [-2.538570321274333796e-01, -2.557213455572639460e-01, -2.690133422784378725e-01, -2.766611813304696854e-01],
         [-3.667796413411953949e-01, -3.492431602930273216e-01, -3.671480331687346776e-01, -3.485524470632213045e-01],
         [1.560065612838740581e-02, 4.796540526802376553e-02, 5.041011077320069200e-02, 6.279830238702294176e-02],
         [1.408562846738357910e-01, 1.437201620482729814e-01, 1.619633299163071027e-01, 1.767985488601668265e-01],
         [1.375052805423869762e-01, 1.431602553512154874e-01, 1.399007428535295749e-01, 1.384441540176652163e-01],
         [2.001691732945173885e-02, 3.408546145048826220e-02, 3.467058239433724876e-02, 3.334386470524992874e-02],
         [-1.381893662754866137e-01, -1.476236249515147092e-01, -1.454516510947849450e-0231, -1.474741995794101312e-01],
         [8.882975561069962611e-02, 7.593859353278273328e-02, 6.735160647644736209e-02, 7.503873837594217389e-02],
         [-6.544621727999269667e-02, -5.297939916655595993e-02, -6.086601158676364920e-02, -4.907619762690923482e-02],
         [-3.475058313665183585e-01, -3.324246649863626391e-01, -3.325838850562581883e-01, -3.368615938921454833e-01],
         [3.780719593326136579e-02, 9.430700138653558273e-02, 7.975300135696744563e-02, 8.373694191166428102e-02],
         [-1.804659386069292493e-01, -2.357317485427651294e-01, -2.329870419194321196e-01, -2.196901742282438286e-01],
         [5.003634702642062448e-03, -5.773140591997413806e-02, -4.118301309002923849e-02, -5.602713722835563070e-02],
         [-3.127607246479460201e-01, -3.106562679447320008e-01, -3.032917356379031260e-01, -3.088184371699287945e-01],
         [1.092206729994068398e-02, -2.311992145360469882e-04, -7.212975213141365610e-03, -7.089797899265020201e-03],
         [-5.626412695668409764e-02, -5.866126679897279428e-02, -6.038067600630257076e-02, -6.101013343482640516e-02],
         [2.882229524149123451e-02, 3.878788896315839285e-02, 4.082220451696687291e-02, 4.955179405273409804e-02],
         [-1.838645386414320959e-01, -1.987422796678097459e-01, -1.991974595058016440e-01, -2.114061550758203345e-01],
         [9.924453586264446459e-02, 1.027381864999005606e-01, 1.069354016090751230e-01, 1.175402442526616298e-01],
         [2.913966778554399201e-02, 2.221868432589093820e-02, 2.531269778079514240e-02, 2.110470365130659789e-02],
         [3.472145651856899939e-01, 3.876775542161812194e-01, 3.858627114203514452e-01, 3.862972959494617164e-01],
         [-1.527685738774345048e-01, -1.712063230269859626e-01, -1.721080732711426087e-01, -1.735595373503553973e-01],
         [-2.076675133999548728e-01, -2.299884301801111142e-01, -2.303014796380631335e-01, -2.241948789239286421e-01],
         [9.536649161134999608e-02, 1.136663068535608972e-01, 1.074573604034075175e-01, 9.859808872521566570e-02],
         [-1.034817630319027765e-01, -1.178199312577479091e-01, -1.160803878746632656e-01, -1.148115431623047550e-01],
         [4.081816823091009017e-01, 4.152503255226595025e-01, 4.174793000401381682e-01, 3.997282547034335942e-01],
         [1.101473053465232416e-01, 1.340703241745895280e-01, 1.312580162351069391e-01, 1.204056616009976377e-01],
         [5.947135933643443728e-02, 6.959580222881546485e-02, 7.517853989181301488e-02, 8.406366778226749548e-02],
         [2.355243685122794250e-01, 2.599263319826693452e-01, 2.573905675789119329e-01, 2.586619615044197240e-01],
         [3.005232154363779995e-01, 3.181983770114525378e-01, 3.107329891918880760e-01, 3.081231214877415137e-01],
         [-2.262211636257800973e-01, -2.319748015609406355e-01, -2.229374203603851912e-01, -2.122710459071452671e-01],
         [1.256993550868401865e-01, 1.471589256794660072e-01, 1.381318052159689891e-01, 1.265007584349066017e-01],
         [-1.974114542270927475e-01, -2.165801865041764307e-01, -2.220896561576293227e-01, -2.180734001832371205e-01],
         [-2.778044268559294872e-01, -2.816508001750020473e-01, -2.774259262844716578e-01, -2.891578058572159549e-01],
         [-3.093804405117246970e-01, -3.591709078660056953e-01, -3.581511076427794094e-01, -3.414200475434697735e-01],
         [-6.531390784041431197e-02, -6.083783454821277414e-02, -9.436058854234823101e-02, -9.201065296798491278e-02],
         [-8.290848202871284323e-02, -6.358775376912445543e-02, -3.392809587704074398e-02, -1.373634170007085459e-02],
         [-8.567720245951818137e-02, -6.850388079125814544e-02, -6.454371258637059405e-02, -8.595471860978809442e-02],
         [2.394120872224217988e-01, 2.467908077822955626e-01, 2.458355718051120076e-01, 2.294067299124691039e-01],
         [sum_to_one_weight, sum_to_one_weight, sum_to_one_weight, sum_to_one_weight]]
    )
